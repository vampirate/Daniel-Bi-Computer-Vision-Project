<!DOCTYPE html>
<html lang="en" dir="ltr">

  <head>
    <meta charset="utf-8">
    <title>Image Identifier</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" media="screen" href="mystyle.css" />
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  </head>

  <body>
    <div class="Navigation">
      <a href="Home.html">Home</a>
      <a href="Information.html">My Info</a>
      <a class="active" href="Image Identifier.html">Image Identifier</a>
      <a href="test.html">Test Page</a>
    </div>

    <div class="ImageIdentifierMain">
      <h1>Image identifier</h1>
      <form>
        <input name="urlInput" type="text" maxlength="512" id="urlInput" />
        <button class="button " type="button" onclick="loadDoc()"><span>Submit!</span></button>
      </form>
    </div>

    <div class="ImageIdentifierResult">
      <p id="ImageIdentifierTags">The tags for the image will be displayed HERE</p>
      <img id="ImageIdentifierImage" width="150" alt="The image will be displayed HERE">
    </div>

    <script>
      function loadDoc() {
        var input = document.getElementById("urlInput").value;
        console.log(input);
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
          if (xhttp.readyState == 3) {
            var resultParsed = JSON.parse(xhttp.responseText);
            console.log(xhttp.responseText);
            console.log(resultParsed);
            document.getElementById("ImageIdentifierTags").innerHTML = "the tags are: " + resultParsed.tags + "<br>";
            document.getElementById("ImageIdentifierImage").src = input;
            console.log(input);
            document.getElementById("ImageIdentifierImage").height = 150;
          }
        };
        xhttp.open("POST", "http://127.0.0.1:3000/geturl", true);
        xhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xhttp.send("JsonURL=" + input);
      }
    </script>

    <div class="footer">
      <p>Made by Daniel Bi</p>
      <p>Powered by Microsoft Azure Computer Vision</p>
    </div>
  </body>

</html>